#### VITE를 번들러라고 할 수 있나? - ChatGPT 4
- VITE는 번들러 역할을 수행하는 도구 중 하나이지만, 그 것 만이 아닌, 모던 웹 어플리케이션을 위한 빠르고 경량화된 개발 도구이다.
- VITE는 개발 모드에서는 번들링을 수행하지 않고, 브라우저가 요청하는 파일을 즉시 변환해 제공함으로써 바른 개발 환경을 제공하며, 이러한 특징이 WebPack 또는 RollUp과 구별된다.
- 프로덕션 빌드시에는 RollUp 번들러를 활용해 최적화된 빌드 결과물을 생성한다.
- 개발과 빌드 단계에서 각각 다른 접근 방식을 취해 효율적인 결과물을 제공한다.
- 이러한 특징 때문에 번들러보다는 번들러를 포함한 모던 웹 개발 도구라고 표현하는 것이 적절하다.

#### VITE 특징
1. VITE가 빠른 이유는 브라우저가 ES modules를 지원함에 따라 일반적인 번들링 과정을 생략하기 때문
	![[Pasted image 20240125154219.png]]
	 기존에는 모든 파일을 번들링 한 후에 서버가 시작

	![[Pasted image 20240125154237.png]]
	 변경된 방법은 서버만 시작한 뒤에 파일이 떨어짐(사전 번들링), module을 이용해 각각의 파일을 그대로 모듈 형태로 브라우저에서 인식하게 된다.

2. native-esm 을 사용하며, 이는 본질적으로 브라우저가 번들러의 작업의 일부를 차지할 수 있도록 한다.
	- native-esm은 중복 import로 인한 중복 네트워크 통신이 발생할 수 있고, 이로 인해 여전히 비효율적인 부분이 있기 때문에 이런 비효율을 개선하기 위해서는 **트리 셰이킹**, **지연 로딩** 및 **파일 분할** 등의 작업이 필요하다. 이를 위해 번들링 과정이 여전히 필요하다. Vite는 이 과정에서 RollUp을 사용한다.

3. 개발 환경과 프로덕션 환경의 번들링 동작 차이
	- Vite는 개발과 프로덕션 환경에서 다르게 동작
	- **개발 환경**
		-> 개발 서버에서는 Hot module Replacement ( HMR ) 을 활용해 빠른 반복 개발 지원
		-> 코드는 필요할 때마다 브라우저에서 동적으로 컴파일되고 제공되므로 빠른 개발 환경 제공 가능
		-> 브라우저가 요청하는 파일이나 모듈이 변경될 때, 필요한 부분만 다시 컴파일, 갱신
	- 프로덕션 환경
		-> 프로덕션 빌드에서는 VITE가 Tree-Shaking과 같은 최적화 기술을 사용해 불필요한 코드를 제거하고 최종 번들을 최적화한다.
		-> 코드 분할(Splitting)을 통해 사용되지 않는 코드는 번들에 포함되지 않도록 한다.
		-> 최종 결과물은 프로덕션 환경에 최적화된 작은 번들로 구성된다. 
	- 개발 환경에서도 코드 분할을 적극적으로 활용하며, 트리셰이킹과 같은 최적화 기술을 일부 사용하지만, 이러한 최적화들은 프로덕션 빌드에서 더 강력하게 작용한다.

> **Code Splitting**
> - 코드를 분할해 사용자가 원하는 시점에 파일을 로딩해 애플리케이션 토기 로딩 속도를 개선하는 방법, Vue는 컴포넌트 정의를 비동기 방식으로 처리할 수 있는 방법을 제공한다.
> - Webpack에서 제공하는 webpackChunkName을 사용하면 리소스를 분리하고 묶을 수 있다. 
> - webpackChunkName을 지정하면 해당 이름으로 파일이 분리되어 빌드된다.
```
	const Home = () => import(/* webpackChunkName: "home" */ './Home.vue');
	const About = () => import(/* webpackChunkName: "about" */ './About.vue');
	const Contact = () => import(/* webpackChunkName: "contact" */ './Contact.vue');
```

>**번들 최적화**
> - webpack으로 명시적으로 분할된 번들(chunk)은 로딩할 때 동일한 종속성을 다운받아 사용될 수 있다. 이러한 문제를 최적화하기 위해 webpack에서는 splitChunks 옵션을 제공한다.
> - 이 옵션은 여러 번들에서 공유되는 종속성을 별도로 그룹화 하여 재 사용 하도록 한다.

>**Tree-Shaking**
> - 번들링 과정에서 사용하지 않는 코드를 제거하고, 파일 크기를 줄여 로딩 성능을 향상시키는 방법
> - webpack4에서는 ES6 모듈(import, export)을 대상으로 트리셰이킹이 기본으로 동작하지만, commonJS 방식의 모듈(require)을 사용하는 경우에는 동작하지 않는다.
> - lodash의 경우, commonJS 형태로 번들링 되어 배포되기 때문에 webpack의 기본 설정으로는 lodash를 트리셰이킹 할 수 없고 트리셰이킹을 위해서 babel-plugin-lodash 혹은 lodash-es를 사용하는 것이 권장된다.
> - 트리셰이킹은 ES6 모듈 시스템의 정적 구조를 활용하며, ES6 모듈시스템에서는 import와 export 구문을 통해 모듈 간의 의존성이 명확하게 정의되므로 어떤 코드가 실제로 사용되고 있는지 분석할 수 있다.


