
## 04. 24
- 리포트 미리보기 api 데이터 받아서 테이블로 표현, 다운로드 공통으로
- 인증 404
- 리포트 등록 버튼 권한 설정 다시 확인
- 
- inregrate ci 설정 보완 필요?
	- 현재 k8s 방식으로 간다면,
		- 각 프로젝트가 따로 올라가는 방식이 아니라, trigger 방식으로, integrate 에서 각 프로젝트의 artifacts 를 curl 로 받아서 연속적으로 빌드하는 방식으로 사용할 수 있다.
		- 완성된 이미지는 harbor1에 push
		- 심차장님 ci 파일 받아서 확인해봐야 할 듯
- 성능관리 다운로드 정상인데 에러 메세지 발생
- SSO 중간 페이지 검색
- 2차 BT - 고객관리, 비용관리
	- 보고서 : 
		- 필터 검색 수행 후 이름 입력하지 않고 조회 버튼 누르면 테이블에는 목록 뜸(뜨지 않아야 함)
		- 보고서 스케쥴 총 건수 표시 수정
		- 보고서 등록 마지막 Select Box : 수집 항목
	- 미터링
		- 미터링 타입 선택 후 그룹이 전체로 자동으로 생성될 때, 하위 Select Box가 생성되지 않는다. 그룹 옵션 선택 후 다시 전체 선택하면 하위 Select Box 항목 생성됨
		- 응답값 null 에 대한 처리, 그룹 선택 후 하위 파라미터 초기화
- 인증


- **인증** 
	- **현재 문제**
		1. access 만료 후 refresh api 요청할 때, 이미 만료된 access 를 가지고 api 요청할 수 없음 -> 인증 off 하면 될 듯? 
		2. 세션에 있는 인증 정보를 가지고 메뉴 구성중.. -> 다른 방식으로 변경필요할듯?
		3. Jade axios header 에서 가지고 있는 인증 정보를 Davis로 넘기는 방식 ( 매번 세션으로 옮겨서? ) -> Davis axios header에 한 번 옮겨놓으면 계속 유지되는지 확인 필요
			1. davis 에서 계속 인증정보를 보관하고 있다면, davis 에서 만료된 토큰을 refresh 로 새로 발급 받았을 때, 해당 신규 인증 정보는 Jade 에서 어떻게 사용할 것인지?
	- idc -> davis 인증 정보 전송 처리 필요
	- access 처리 후 인증 불가 -> refresh 인증 불가 -> 미인증 처리 필요
		- access 만료 후  http://172.25.80.120:31002/docs#/%ED%86%A0%ED%81%B0/refresh_token_api_token_refresh_post  refresh 재 발행 api 요청 -> header 에 새로운 토큰 정보(access, refresh) 적용해서 이후로 계속 api 통신 : 모든 요청에 적용되어야 함
		- 토큰 에러 정보  
			1. 토큰 정보 없음 (헤더에 토큰을 전달하지 않을 경우)  
				{ "message": "An unexpected error occurred" }  
			  
			2. 잘못된 토큰 정보 (전달된 토큰이 유효하지 않음, 만료됨)  
				{ "data": 
					{  
				        "code": "ERR-AUTH-13",  
				        "msg": "invalid token."  
				    } 
				 }

- **Davis 관련**
	-  서버와의 시간 전송은 항상 ISO 8601 형식으로 전달하고 받는다.
		- 그에 따른 전송, 화면 표현 시간대 변경 함수 적용 필요
	- **Report**
		- target 설정 api ( 기존 메타데이터 ) 주소 변경 가능성 있음
		- 요청 파라미터 키 변경 가능성 있음
		- 응답 데이터 형태 변경 가능성 있음
	- **Metering**
		- 우선은 화면에서는 아무 변경 사항 없을 **예정**

- **IDC용 Davis Project**
	- **현재 서버 Docker 전용 계정 알아서, 해당 계정에서 사용할 환경 변수(민감 정보) 설정 -> CICD 시 OS 저장된 환경 변수를 사용할 수 있도록 설정, Test**
	- **Integrate Project davis 추가 설정 해줘야함**
	- 노드 버전 업그레이드
	- CI/CD 구성 설정 변경
	- network 설정 변경
	- docker-compose 관련 설정 파악
	- 노드 이미지 하버, 빌드 설정 수정

- **Integrate CICD**
	- api 경로별 path 처리 추가 필요 ( 메일 확인 )
	- artifacts cp 경로 없다면 생성하는 명령어 추가
	- 

- **성능 관리**
	- api 연동
	- <s>web에 올라간 결과물 mock 관련 오류 발생, 해결 필요 -> 프로덕션 환경에서는 작동 안 하거나 별도의 설정 필요할 수 있음, 설정 관련해서는 찾아봐야 할 듯 -> LineChartData.ts 를 잘못된 파일을 사용하고 있어서 제대로 된 데이터를 로드하지 못해 발생</s>

### IDC Harbor PUSH
- kqc > kqc-bmp-web:latest, 1.0.0
- 172.25.20.61:9333